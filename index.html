import React, { useState, useEffect } from 'react';
import { Heart, Gift, Sparkles, MapPin, Crown } from 'lucide-react';

const BirthdayTreasureHunt = () => {
  const [showCode, setShowCode] = useState(false);
  const [currentCode, setCurrentCode] = useState('');
  const [unlockedGifts, setUnlockedGifts] = useState([]);
  const [error, setError] = useState('');
  const [showConfetti, setShowConfetti] = useState(false);

  // Configure your gifts here - you can customize locations and messages
  const gifts = [
    { 
      code: 'BUBUNU', 
      location: 'Under your driver\'s seat ðŸš—',
      message: 'Your first surprise is waiting right where you sit every day...'
    },
    { 
      code: 'JOLOVESU', 
      location: 'Come to Jo\'s workplace ðŸ’¼',
      message: 'Time for a little trip! Your next gift is waiting at Jo\'s work...'
    },
    { 
      code: 'TWENTY1', 
      location: 'Ask Jesus and Enrique ðŸ™',
      message: 'The next clue requires some help from friends...'
    },
    { 
      code: 'ALLABOUTU', 
      location: 'Find Jordan and tell him "Jesus Loves Us" âœï¸',
      message: 'Jordan has something special for you, but you need to say the magic words...'
    },
    { 
      code: 'PRINCESSK', 
      location: 'That\'s it for the games...no more secrets ðŸ’',
      message: 'You did it! The treasure hunt is complete, Princess! ðŸ‘‘'
    }
  ];

  const birthdayQuotes = [
    "In your eyes, I found my home. In your heart, I found my love. Happy Birthday, darling.",
    "Every moment with you is a treasure. Today, we celebrate the most precious one of allâ€”you.",
    "You are the elegance in my chaos, the grace in my days. Happy Birthday, my love.",
  ];

  const quote = birthdayQuotes[Math.floor(Math.random() * birthdayQuotes.length)];

  const handleCodeSubmit = (e) => {
    e.preventDefault();
    setError('');
    
    const gift = gifts.find(g => g.code.toUpperCase() === currentCode.toUpperCase());
    
    if (gift && !unlockedGifts.find(ug => ug.code === gift.code)) {
      setUnlockedGifts([...unlockedGifts, gift]);
      setCurrentCode('');
      setShowConfetti(true);
      setTimeout(() => setShowConfetti(false), 3000);
    } else if (gift && unlockedGifts.find(ug => ug.code === gift.code)) {
      setError('You already found this gift.');
    } else {
      setError('That code doesn\'t seem right. Try again.');
    }
  };

  // Elegant floating elements
  const FloatingSparkle = ({ delay }) => (
    <div 
      className="absolute text-purple-300 opacity-40 animate-float"
      style={{
        left: `${Math.random() * 100}%`,
        animationDelay: `${delay}s`,
        animationDuration: `${4 + Math.random() * 3}s`
      }}
    >
      <Sparkles size={16} />
    </div>
  );

  return (
    <div className="min-h-screen bg-gradient-to-br from-gray-900 via-purple-900 to-black relative overflow-hidden">
      {/* Elegant floating sparkles */}
      <div className="absolute inset-0 overflow-hidden pointer-events-none">
        {[...Array(20)].map((_, i) => (
          <FloatingSparkle key={i} delay={i * 0.7} />
        ))}
      </div>

      {/* Metallic shimmer overlay */}
      <div className="absolute inset-0 opacity-10 pointer-events-none bg-gradient-to-br from-transparent via-white to-transparent animate-shimmer"></div>

      {/* Confetti effect */}
      {showConfetti && (
        <div className="absolute inset-0 pointer-events-none z-50">
          {[...Array(60)].map((_, i) => (
            <div
              key={i}
              className="absolute w-2 h-2 rounded-full animate-confetti"
              style={{
                left: `${Math.random() * 100}%`,
                animationDelay: `${Math.random() * 0.5}s`,
                top: '-10px',
                background: i % 2 === 0 ? 'linear-gradient(135deg, #a855f7, #7c3aed)' : 'linear-gradient(135deg, #c0c0c0, #e5e5e5)'
              }}
            />
          ))}
        </div>
      )}

      <div className="relative z-10 container mx-auto px-4 py-12 max-w-3xl">
        {/* Main birthday card */}
        {!showCode ? (
          <div className="bg-gradient-to-br from-purple-950/40 to-black/60 backdrop-blur-xl rounded-2xl shadow-2xl border border-purple-500/20 overflow-hidden">
            {/* Chrome accent top */}
            <div className="h-1 bg-gradient-to-r from-transparent via-purple-400 to-transparent"></div>
            
            <div className="p-12 md:p-16">
              {/* Crown decoration */}
              <div className="text-center mb-8">
                <Crown className="w-16 h-16 mx-auto mb-6 text-purple-400 animate-pulse" strokeWidth={1.5} />
                <h1 className="text-6xl md:text-7xl font-serif font-light text-transparent bg-clip-text bg-gradient-to-r from-purple-200 via-purple-400 to-purple-200 mb-6 tracking-wide">
                  Happy Birthday
                </h1>
                <div className="h-px w-32 mx-auto bg-gradient-to-r from-transparent via-purple-400 to-transparent mb-8"></div>
                <p className="text-xl md:text-2xl text-purple-100 font-light italic leading-relaxed max-w-2xl mx-auto">
                  {quote}
                </p>
              </div>

              {/* Elegant flower arrangement */}
              <div className="flex justify-center gap-6 mb-10 text-4xl opacity-80">
                <span className="animate-pulse" style={{animationDelay: '0s', animationDuration: '3s'}}>ðŸŒ¹</span>
                <span className="animate-pulse" style={{animationDelay: '0.5s', animationDuration: '3s'}}>ðŸ’œ</span>
                <span className="animate-pulse" style={{animationDelay: '1s', animationDuration: '3s'}}>ðŸŒ¹</span>
              </div>

              <div className="bg-gradient-to-br from-purple-900/30 to-black/30 backdrop-blur-sm rounded-xl p-8 mb-10 border border-purple-500/20">
                <p className="text-purple-100 text-center text-lg font-light leading-relaxed">
                  A journey awaits you today, with {gifts.length} treasures hidden along the way. Each discovery brings you closer to something special. Are you ready to begin?
                </p>
              </div>

              <button
                onClick={() => setShowCode(true)}
                className="w-full bg-gradient-to-r from-purple-600 via-purple-500 to-purple-600 text-white py-5 rounded-xl font-light text-xl tracking-wide shadow-lg shadow-purple-500/30 hover:shadow-purple-500/50 transform hover:scale-[1.02] transition-all duration-300 flex items-center justify-center gap-3 border border-purple-400/30"
              >
                <Gift className="w-5 h-5" />
                Begin Your Journey
                <Sparkles className="w-5 h-5" />
              </button>
            </div>
          </div>
        ) : (
          <div className="bg-gradient-to-br from-purple-950/40 to-black/60 backdrop-blur-xl rounded-2xl shadow-2xl border border-purple-500/20 overflow-hidden">
            {/* Chrome accent top */}
            <div className="h-1 bg-gradient-to-r from-transparent via-purple-400 to-transparent"></div>
            
            <div className="p-12 md:p-16">
              <div className="text-center mb-10">
                <Gift className="w-12 h-12 mx-auto mb-6 text-purple-400" strokeWidth={1.5} />
                <h2 className="text-4xl md:text-5xl font-serif font-light text-purple-200 mb-3 tracking-wide">
                  Your Journey
                </h2>
                <p className="text-purple-300 font-light text-lg">
                  {unlockedGifts.length} of {gifts.length} treasures discovered
                </p>
              </div>

              {/* Elegant progress bar */}
              <div className="w-full bg-black/40 rounded-full h-2 mb-12 overflow-hidden border border-purple-500/20">
                <div 
                  className="h-2 rounded-full transition-all duration-700 bg-gradient-to-r from-purple-600 via-purple-400 to-purple-600 shadow-lg shadow-purple-500/50"
                  style={{width: `${(unlockedGifts.length / gifts.length) * 100}%`}}
                />
              </div>

              {/* Code input */}
              {unlockedGifts.length < gifts.length && (
                <div className="mb-12">
                  <label className="block text-purple-200 font-light mb-4 text-lg tracking-wide">
                    Enter Your Secret Code
                  </label>
                  <div className="flex gap-4">
                    <input
                      type="text"
                      value={currentCode}
                      onChange={(e) => setCurrentCode(e.target.value)}
                      onKeyPress={(e) => e.key === 'Enter' && handleCodeSubmit(e)}
                      className="flex-1 px-6 py-4 bg-black/40 border border-purple-500/30 rounded-xl focus:border-purple-400 focus:outline-none focus:ring-2 focus:ring-purple-500/20 text-lg text-purple-100 uppercase tracking-widest placeholder-purple-400/40 font-light backdrop-blur-sm"
                      placeholder="ENTER CODE"
                      maxLength={15}
                    />
                    <button
                      onClick={handleCodeSubmit}
                      className="bg-gradient-to-r from-purple-600 to-purple-500 text-white px-10 py-4 rounded-xl font-light tracking-wide hover:shadow-lg hover:shadow-purple-500/40 transform hover:scale-[1.02] transition-all duration-300 border border-purple-400/30"
                    >
                      Unlock
                    </button>
                  </div>
                  {error && (
                    <p className="text-purple-300 mt-4 text-center font-light italic">{error}</p>
                  )}
                </div>
              )}

              {/* Unlocked gifts */}
              {unlockedGifts.length > 0 && (
                <div className="space-y-6">
                  <h3 className="text-2xl md:text-3xl font-serif font-light text-purple-200 mb-6 flex items-center gap-3">
                    <MapPin className="w-6 h-6" strokeWidth={1.5} /> 
                    <span>Your Clues</span>
                  </h3>
                  {unlockedGifts.map((gift, idx) => (
                    <div 
                      key={idx}
                      className="bg-gradient-to-br from-purple-900/30 to-black/30 backdrop-blur-sm border border-purple-500/20 rounded-xl p-8 transform transition-all hover:scale-[1.01] hover:border-purple-400/40 duration-300"
                    >
                      <div className="flex items-start gap-4">
                        <div className="text-3xl opacity-80">ðŸ’Ž</div>
                        <div className="flex-1">
                          <p className="text-purple-200 font-light mb-4 text-lg leading-relaxed">{gift.message}</p>
                          <div className="bg-black/40 rounded-lg p-5 border border-purple-500/20">
                            <p className="text-purple-300 font-light text-lg tracking-wide">
                              <MapPin className="w-4 h-4 inline mr-2" />
                              {gift.location}
                            </p>
                          </div>
                        </div>
                      </div>
                    </div>
                  ))}
                </div>
              )}

              {/* Completion message */}
              {unlockedGifts.length === gifts.length && (
                <div className="mt-12 bg-gradient-to-r from-purple-600 via-purple-500 to-purple-600 rounded-2xl p-10 text-center border border-purple-400/30 shadow-lg shadow-purple-500/30">
                  <Crown className="w-16 h-16 mx-auto mb-6 text-white animate-pulse" strokeWidth={1.5} />
                  <h3 className="text-4xl font-serif font-light mb-4 text-white tracking-wide">Journey Complete</h3>
                  <div className="h-px w-32 mx-auto bg-white/30 mb-6"></div>
                  <p className="text-xl text-white/90 font-light leading-relaxed">
                    Happy Birthday, my love. Every moment with you is a treasure, and today is all about celebrating you. You deserve the world and more.
                  </p>
                </div>
              )}
            </div>
          </div>
        )}
      </div>

      <style>{`
        @keyframes float {
          0%, 100% { transform: translateY(100vh) rotate(0deg); opacity: 0; }
          10% { opacity: 0.4; }
          90% { opacity: 0.4; }
          100% { opacity: 0; }
        }
        
        @keyframes confetti {
          0% { transform: translateY(0) rotate(0deg); opacity: 1; }
          100% { transform: translateY(100vh) rotate(720deg); opacity: 0; }
        }
        
        @keyframes shimmer {
          0% { transform: translateX(-100%) translateY(-100%) rotate(45deg); }
          100% { transform: translateX(100%) translateY(100%) rotate(45deg); }
        }
        
        .animate-float {
          animation: float linear infinite;
        }
        
        .animate-confetti {
          animation: confetti 2s ease-out forwards;
        }
        
        .animate-shimmer {
          animation: shimmer 8s ease-in-out infinite;
        }
      `}</style>
    </div>
  );
};

export default BirthdayTreasureHunt;
